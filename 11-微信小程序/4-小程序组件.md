# 目标：

* 知道如何自定义小程序组件
* 知道组件中的 behaviors 的作用
* 知道如何安装与配置 vant-weapp 组件库
* 知道如何使用 MobX 实现全局数据共享
* 知道如何对 API 进行 Promise 化

# 1. 自定义组件

### 1.1 组件的创建与引用

#### 1. 创建组件

* 在根目录下，创建`components`文件夹
* `components`文件夹右键点击`新建 component`
* 每个组件有 4 个文件，分别是`.js`、`.json`、`.wxss`、`.wxml`

推荐将不同组件放在不同的文件夹中：

<img src="./resource/35.png" align="left" />

#### 2. 引用组件

组件的引用方式有两种：

* 局部引用：组件只能在当前引用的页面中使用
* 全局引用：组件可以在每个小程序页面中使用

#### 3. 局部引用组件

在页面的`.json`配置文件中引用组件

```json
{
    "usingComponents": {
        "my-test01": "/components/test1/test"
    }
}
```

```html
<!-- WXML -->
<my-test01></my-test01>
```

#### 4. 全局引用组件

在`app.json`中引用组件，这样所有的小程序页面都可以使用组件

```json
{
    "pages": {},
    "window": {},
    "usingComponents": {
        "my-test02": "/components/test2/test"
    }
}
```

#### 5. 全局与局部的引用场景

根据组件的**使用频率**和**范围**，来选择合适的引用方式：

* 如何某个组件在多个页面中经常用到，建议使用全局引用
* 如果某个组件只在特定的页面中才用到，建议使用局部引用

#### 6. 组件和页面的区别

从表面来看，组件和页面都是由4个文件组成的，但是组件和页面的文件有明显不同：

* 组件的`.json`文件需要声明：`"component": true`
* 组件的`.js`文件调用的是`Component()`函数
* 组件的事件处理函数集中在`methods`节点中

