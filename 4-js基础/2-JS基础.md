# 1. 初识 JavaScript

### 1.1 JS历史

布兰登艾奇（Brendan Eich，1961年 ~）是一名网景公司的员工，于1995年利用10天完成JS设计。起初命名为LiveScript，后来网景公司和Sun公司合作后改名为JavaScript

### 1.2 JS是什么

* JS是世界上最流行的语言之一，是一种运行在客户端的脚本语言
* 脚本语言：不需要编译，运行过程中由JS解释器解释并执行
* 现在也可以基于Node.js进行服务端编程

### 1.3 JS的作用

* 表单动态核验（JS产生最初的目的）
* 网页特效
* 服务端开发（Node.js）
* 桌面程序（Electron）
* App（Cordova）
* 控制硬件-物联网（Ruff）
* 游戏开发（cocosd-js）

### 1.4 浏览器执行JS简介

浏览器分为两部分，渲染引擎和JS引擎

* 渲染引擎：用于解释HTML和CSS，俗称内核，比如Chrome浏览器的blink，老版本的webkit
* JS引擎：也称为JS解释器，用于读取页面中的JS代码，对其处理后运行。比如Chrome浏览器的V8

浏览器本身并不会执行JS代码，而是通过内置的JS引擎（JS解释器）来执行JS代码。JS引擎执行代码时会逐行读取每一句源码，转换为机器语言然后由计算机去执行。所以JS被归为脚本语言，因为是逐行读取代码。

### 1.5 JS的组成

* ECMAScript：JavaScript语法
* DOM：页面文档对象模型
* BOM：浏览器对象模型

##### 1.5.1 ECMAScript

ECMAScript是由ECMA国际（原欧洲计算机制造协会）设定的标准化的一门编程语言，这种语言在万维网上应用广泛，它往往被称为JavaScript（网景公司）或JScript（微软公司）。但后两者其实只是ECMAScript语言的实现和扩展。

ECMAScript规定了JS的变成语法和基础核心知识，是所有浏览器厂商共同遵守的一套JS语法工业标准

##### 1.5.2 DOM

文档对象模型（Document Object Model）是由W3C组织推荐的处理可扩展标记语言的**标准编程接口**

通过操作文档对象模型可以对页面的所有元素进行操作（大小、颜色等等）

##### 1.5.3 BOM

浏览器对象模型（Browser Object Model）提供了独立与内容的，可以与浏览器窗口进行交互的对象结果。通过BOM可以操作浏览器窗口，比如弹出框、控制浏览器跳转、获取分辨率等等

### 1.6 JS初体验

JS有三种书写位置，分别是行内、内嵌和外部。

##### 1.6.1 行内JS

```html
<input type="button" value="按钮" onclick="alert('行内JS')" />
```

* 可以把单行或少量JS代码卸载HTML标签的事件属性后，如：onclick（鼠标单击事件）
* 注意单双引号的引用
* 可读性差，在HTML中编写大量JS代码，不方便阅读
* 引号易错，引号多层嵌套匹配时，容易弄混
* 特殊情况下使用

##### 1.6.2 内嵌JS

```html
<script>
    alert("内嵌式JS");
</script>
```

* 可以将多行JS代码写到`<script>`标签中

##### 1.6.3 外部JS

```html
<script src="my.js"></script>
```

* 将所有的JS代码独立于页面之外，方便阅读及复用
* 引入外部JS文件的`<script></script>`直接不要写代码
* 适用于JS代码量较多的情况

### 1.7. JavaScript 注释

* 单行注释：`//`
* 多行注释：`/* JS Code */`

### 1.8. JavaScript 输入输出语句

为了方便信息的输入和输出，JS提供一些输入输出语句

| 方法             | 说明                           | 归属   |
| ---------------- | ------------------------------ | ------ |
| alert(msg)       | 浏览器弹出警示框               | 浏览器 |
| console.log(msg) | 浏览器控制台打印输出信息       | 浏览器 |
| prompt(info)     | 浏览器弹出输入框，用户可以输入 | 浏览器 |

# 2. JavaScript变量

变量是用于存放数据的容器，我们可以通过变量名来获取数据，也可以修改数据

### 2.1 变量在内存中的存储

变量是程序在内存中申请的一块用于储存数据的空间

### 2.2 变量的使用

变量在使用时分为两步：1.声明变量  2.赋值

##### 2.2.1 声明变量

```javascript
// 声明变量
var age;  // 声明一个名称为age的变量
```

* var是一个JS关键字，用于声明变量（variable）。使用该关键字声明变量后，计算机会自动在内存中开辟一块空间
* age是自定义的变量名，我们通过这个变量名来访问内存中的变量

##### 2.2.2 赋值

```javascript
age = 10; // 给变量age赋值10
```

##### 2.2.3 变量的初始化

```javascript
var age = 10; // 声明变量并赋值称为变量的初始化
```

### 2.3 变量语法扩展

##### 2.3.1 更新变量

一个变量被重新赋值后，以最后一个值为准

 ```javascript
var age = 18
age = 20; // 此时age=20，之前的值被覆盖
 ```

##### 2.3.2  声明多个变量

```javascript
var age = 0,address = "Beijing";
```

变量之间用逗号分隔

##### 2.3.3 声明变量特殊情况

| 情况                      | 说明           | 结果      |
| ------------------------- | -------------- | --------- |
| var age;console.log(age); | 只声明，不赋值 | undefined |
| console.log(age)          | 不声明直接使用 | 报错      |
| age=10;console.log(age);  | 不声明，只赋值 | 10        |

### 2.4 变量命名规范

* 由字母（a-z,A-Z）、数字（0-9）、下划线（_）、美元符号（$）组成，如：`userAge`、`my01`、`_name`
* 严格区分大小写，app和App是两个变量
* 不能以数字开头
* 不能是关键字、保留字。如：for、var、while
* 变量名必须有意义，不能是aa，bb
* 遵循驼峰命名法，如：myFristName

# 3. JavaScript数据类型

### 3.1 为什么需要数据类型

在计算机中，不同的数据所需占用的储存空间不同的，为了便于把数据分为所需内存大小不同的数据，充分使用储存空间，于是就定义了不同的数据类型

### 3.2 变量的数据类型

变量有名字的数据类型，变量的数据类型决定了如何将代表这些值的位储存到计算机的内存中，JS是一门弱类型的语言，这意味着不用提前声明变量的类型，在程序运行过程中，类型会被自动确定。

因为JS具有动态类型，同时意味着相同的变量可用于不同的数据类型

### 3.3 数据类型的分类

JS把数据类型分为两类：

* 简单数据类型
* 复杂数据类型

### 3.4 简单数据类型（基本数据类型）

| 简单数据类型 | 说明                                 | 默认值    |
| ------------ | ------------------------------------ | --------- |
| Number       | 数字型，包含整形和浮点值，如21、0.21 | 0         |
| Boolean      | 布尔值类型，如true，false            | false     |
| String       | 字符串类型                           | ""        |
| Undefined    | 变量未被初始化                       | undefined |
| Null         | var a = null; 声明了变量a为空值      | null      |

##### 3.4.1 数字型Number

JS数字类型可以用来包含整数和小数。

```javascript
var num = 10; //int 整型
var PI = 3.14; //float 浮点型
var num1 = 010; //在值前面加上0，表示8进制
console.log(num1);
var num2 = 0xa; // 在值前面加上0x，表示16进制 0-9 a-f
console.log(num2);
console.log(Number.MAX_VALUE); // 数字型的最大值
console.log(Number.MIN_VALUE); // 数字型的最小值
```

###### 数字型的特殊值

```javascript
console.log(Infinity); // Infinity
console.log(-Infinity); // -Infinity
console.log(NaN); // NaN例如 console.log("alex" - 100)
```

* Infinity：代表无穷大，大于任何数值
* -Infinity：代表无穷小，小于任何数值
* NaN：not a number，代表一个非数值

###### isNaN()

这个方法用来判断非数字，如果是数字返回false，如果不是数字返回true

##### 3.4.2 字符串型 String

字符串型可以是引号中的任意文本，可以是"双引号"也可以是'单引号'

###### 字符串长度

使用length这个属性

###### 字符串拼接

* 多个字符串可以使用+进行拼接，其拼接方式为 字符串1+字符串2
* 拼接前会把任何类型转换为字符串类型（包括true，false，undefined，null）

##### 3.4.3 布尔型

布尔型（Boolean）只有两个值true，false

在使用布尔型相加时，true当做0来看，false当做1来看

##### 3.4.4 获取数据类型

typeof(变量名)：获取此变量的数据类型

### 3.5 数据类型的转换

##### 3.5.1 转换为字符串

| 方式              | 说明                         | 案例                              |
| ----------------- | ---------------------------- | --------------------------------- |
| toString()        | 转成字符串                   | var num=1; alert(num.toString()); |
| String() 强制转换 | 转换成字符串                 | var num=1; alert(String(num));    |
| 加号拼接字符串    | 和字符串拼接的结果都是字符串 | var num=1; alert(num + "String"); |

##### 3.5.2 转换为数字型（重点）

| 方法               | 说明                         | 案例              |
| ------------------ | ---------------------------- | ----------------- |
| parseInt(string)   | 将string转换为整数数值       | parseInt("123")   |
| parseFloat(string) | 将string转换为浮点数值       | parseFloat("1.2") |
| Number类强制转换   | 将string转换为数值型         | Number("11")      |
| js 隐式转换(- * /) | 利用算术运算隐式转换为数值型 | '12' - 0          |

* 隐式转换是我们在进行运算的时候，js自动转换了数据类型

##### 3.5.3 转换为布尔型

| 方法          | 说明                 | 案例            |
| ------------- | -------------------- | --------------- |
| Boolean()函数 | 其他类型转换为布尔值 | Boolean('true') |

* 代表空、否定的值都会被转换为false，如''、0、NaN、null、undefined
* 其他值则会被转换为true

# 4. JavaScript运算符

运算符（operator）也被称为操作符，是用于实现赋值，比较和执行算数运算功能的符号。

JavaScript中常用的运算符有：

* 算术运算符
* 递增和递减运算符
* 比较运算符
* 逻辑运算符
* 赋值运算符

### 4.1 算术运算符

算术运算使用的符号，用于执行两个变量或值之间的算术运算。先算乘除后算加减。

| 运算符 | 描述         | 实例          |
| ------ | ------------ | ------------- |
| +      | 加           | 10 + 20 = 30  |
| -      | 减           | 10 - 20 = -10 |
| *      | 乘           | 10 * 20 = 200 |
| /      | 除           | 10 / 20 = 0.5 |
| %      | 模（取余数） | 9 % 2 = 1     |

##### 4.1.1 浮点数的精度问题

浮点数值的最高精度是17位小数，但是在进行算术运算时其精确度不如整数，所以我们一般不要将两个小数直接相加

```javascript
console.log(0.1 + 0.2); // 0.30000000000000004
console.log(0.07 * 100); // 7.000000000000001
```

**所以不要直接判断两个小数是否相等！！！**

##### 4.1.2 表达式和返回值

表达式：是由数字、运算符、变量等以能求得数值的有意义的排列方法得组合。简单理解就是由数字、运算符和变量所组成的式子

**表达式最终都会有结果，返回给我们的结果，就是返回值**

### 4.2 递增递减运算符

如果需要反复给一个变量加1或减1，可以使用递增（++）和递减（--）运算符来完成

在js中，递增（++）和递减（--）既可以放在变量前面，也可以放在变量后面。放在前面我们叫做前置递增（递减）运算符，放在后面我们叫做后置递增（递减）运算符。

注意：**递增和递减只能和变量一起使用**

##### 4.2.1 前置递增（递减）

++num/--num 前置递增（递减），类似于num = num+/- 1。注意前置递增（递减）是：先运算，后返回值。

##### 4.2.2 后置递增（递减）

num++/num-- 前置递增（递减），类似于num = num+/- 1。注意前置递增（递减）是：先返回值，后运算。

##### 4.2.3 前置和后置的区别

如果单独使用，这两者没有什么区别，如果是在运算中，那么前置会先运算完毕之后，再返回已经运算好的值，而后置则是先返回原值，再自增（自减）1。**在开发时，我们大部分使用后置。**

### 4.3 比较运算符

比较运算符（关系运算符）是**两个数据进行比较时所用的运算符**，比较运算后，会返回一个布尔值（true/false）作为比较运算的结果

| 运算符    | 说明                       | 案例          | 结果  |
| --------- | -------------------------- | ------------- | ----- |
| <         | 小于                       | 1 < 2         | true  |
| >         | 大于                       | 1 > 2         | false |
| >=        | 大于等于                   | 2 >= 2        | true  |
| <=        | 小于等于                   | 1<=2          | true  |
| ==        | 判等号（会转型）           | 5 == 5        | true  |
| !=        | 不等于                     | 6 != 6        | false |
| ===   !== | 全等（要求值和类型都一致） | 123 === '123' | false |

##### 4.3.1 =（等号）

| 符号 | 作用 | 用法                                                   |
| ---- | ---- | ------------------------------------------------------ |
| =    | 赋值 | 把右边的值赋给左边                                     |
| ==   | 判断 | 判断两个值是否相等（只判断值，有隐式转换）             |
| ===  | 全等 | 判断两边的值和类型是否都相同（注意是判断**值和类型**） |

### 4.4 逻辑运算符

逻辑运算符是用来进行布尔值运算的运算符，其返回值也是布尔值。在开发时常用于多个条件的判断

| 运算符 | 说明                  | 案例            |
| ------ | --------------------- | --------------- |
| &&     | 逻辑与，简称与（and） | true && false   |
| \|\|   | 逻辑或，简称或（or）  | true \|\| false |
| !      | 逻辑非，简称非（not） | !true           |

##### 4.4.1 逻辑与

逻辑与，两侧都为真则为真，一侧为假则为假

```javascript
console.log(1 == 1 && 2 == 2); // true
console.log(1 == 1 && 1 == 2); // false
```

##### 4.4.2 逻辑或

逻辑或，一侧为真则为真，两侧为假则为假

```javascript
console.log(1 == 1 || 1 == 2); // true
console.log(1 == 2 || 1 == 2); // false
```

##### 4.4.3 逻辑非

逻辑非，取反的

```javascript
console.log(!false); // true
```

##### 4.4.4 短路运算（逻辑中断）

短路运算的原理：当有多个表达式（值）时，左边的表达式值可以确定结果时，就不再进行右边的计算得出结果了（**提高效率**）

**逻辑与的短路运算**

* 语法：a && b
* 如果a结果是true，那么返回b
* 如果a结果是false，那么返回a

**逻辑或的短路运算**

* 语法：a || b
* 如果a为真，那么返回a
* 如果a为假，那么返回b

### 4.5 赋值运算符

用来把数据赋值给变量的运算符

| 运算符       | 说明               | 案例                            |
| ------------ | ------------------ | ------------------------------- |
| =            | 直接赋值           | var age = 18                    |
| +=   -=      | 加减后再赋值       | var age = 5; age += 10    // 15 |
| *=   /=   %= | 乘、除、模后再复制 | var age = 2; age*=10      // 20 |

### 4.6 运算符优先级

| 优先级 | 运算符     | 顺序                |
| ------ | ---------- | ------------------- |
| 1      | 小括号     | ()                  |
| 2      | 一元运算符 | ++   --   !         |
| 3      | 算术运算法 | 先 * / % 后 + -     |
| 4      | 关系运算符 | >  >=  <  <=        |
| 5      | 相等运算符 | ==   !=   ===   !== |
| 6      | 逻辑运算符 | 先&&后\|\|          |
| 7      | 赋值运算符 | =                   |
| 8      | 逗号运算符 | ,                   |

# 5. JavaScript流程控制

流程控制就是来控制我们的代码按照什么样的结构顺序来执行

* 顺序结构（按照代码的从上到下，从左右到的顺序，依次执行）
* 分支结构（if...else、switch）
* 循环结构(for、while)

### 5.1 分支结构

在代码以顺序执行的过程中，根据不同的条件，执行不同的路径代码，从而得到不同的结果。

* if 语句
* switch 语句

##### 5.1.1 if 语法结构

```javascript
// 单个条件
if(条件表达式){
	条件成立执行语句
}

// 单个条件
if(条件表达式){
    条件成立执行的代码
}else{
    条件不成立执行的代码
}

// 多个条件
if(条件1){
    条件1成立执行的代码
}else if(条件2){
    条件2成立执行的代码
}else if(条件3){
    条件3成立执行的代码
}......
else{
    所有条件都不成立时执行的代码
}
```

##### 5.1.2 三元表达式

三元表达式也能做一些简单的选择。由三元运算符的组成的式子叫做三元表达式

* 语法结构  a?b:c
* 如果a为真，那么返回b
* 如果a为假，那么返回c

##### 5.1.3 switch语法结构

switch语句也是多分支语句，它是基于不同的条件来执行不同的代码。当要针对的变量设置一系列特定的值时，就可以使用switch。switch语句只能实现规定值。

举个例子：

```javascript
// 假如num是0-5的数字
switch(num){
    case 0:如果num是0，执行这个代码;break; // 一定要加上break
    case 1:如果num是1，执行这个代码;break; // 一定要加上break
    case 2:如果num是2，执行这个代码;break; // 一定要加上break
    case 3:如果num是3，执行这个代码;break; // 一定要加上break
    case 4:如果num是4，执行这个代码;break; // 一定要加上break
    case 5:如果num是4，执行这个代码;break; // 一定要加上break
    default: 这个是不满足上述条件执行的代码;break;
}
```

* num必须要和case后面的值全等（值和类型都相等）才可以
* 如果没有break；那么就会一直执行下一个case，直到遇到break或者遇到default才会停止

##### 5.1.4 switch语句和if...else if...语句的区别

* 一般情况下，这两个语句是可以相互替换的
* switch...case语句通常处理case为比较确定值的情况下，而if...else if语句更加灵活，常用语判断范围（大于、等于某个范围）
* switch 语句直接执行匹配的代码，效率更高，而if语句则是有几种条件，就要判断多少次
* 当分支比较少时，if语句比switch效率更高
* 当分支比较多时，switch语句比if效率高，而且结构更清晰

### 5.2 循环结构

如果代码需要多次重复执行，那么就可以放入循环中。

* for 循环
* while 循环
* do...while 循环

##### 5.2.1 for循环

在程序中，一组被重复执行的语句被称为循环体，能够继续重复执行，取决于循环的终止条件。由循环体及循环的终止条件组成的语句，被称之为循环语句

```javascript
for(初始化变量;条件表达式;操作表达式){
    每次循环执行的代码
}
```

* 初始化变量：用var声明的普通变量，通常用于计数器。例如：var i = 0;
* 条件表达式：循环终止的条件，循环执行的次数。例如：i<100
* 操作表达式：每次循环执行的代码，经常用于计数器变量进行更新（递增、递减）。例如：i++

##### 5.2.2 双重for循环

循环嵌套是指在一个循环语句中再定义一个循环语句的语法结果，例如在for语句中，我们可以再嵌套一个for循环。

```javascript
for(var i=0;i<10;i++){
    for(var j=0;j<i;j++){
        console.log(j);
    }
}
```

外面的循环执行一次，里面的循环执行全部

###### 九九乘法表

```javascript
var str = "";
for (var i = 1; i < 10; i++) {
    for (var j = 1; j <= i; j++) {
        str += j + "×" + i + "=" + i * j + "\t";
    }
    str += "\n";
}
console.log(str);
```

##### 5.2.3 while循环

while语句在条件表达式为真的情况下，循环执行制定的一段代码，直到条件不为真的时候才会结束

```javascript
while(条件表达式){
    //循环执行的代码
}
```

##### 5.2.4 do...while循环

do...while语序其实是while循环的一个变体。该循环会先执行一次代码块，然后对表达式进行判断，如果条件为真，那么就会继续执行代码块，否则退出循环。

```javascript
do {
    //循环体
}while(条件表达式)
```

**do...while至少会执行一次循环体的代码**

##### 5.2.5 循环小结

* JS循环中有for、while、do...while
* 三个循环多数情况下都可以相互替代使用
* 如果是用来计数，和数字有关的，三者基本相同，for比较常用
* while和do...while可以做更复杂的条件判断，比for更灵活一些
* while和do...while执行顺序不同，while是判断后执行，do...while是先执行一次后判断
* while和do...while执行次数不同，do...while至少会执行一次，while则可能一次都不执行
* 实际开发中，我们更加常用for循环

##### 5.2.6 continue关键字

continue关键字用于立即跳出本次循环，继续下次循环

##### 5.2.7 break关键字

break关键字用于直接结束循环

